{% extends "web/base.html" %}
{% block content %}

<h1>Usuarios</h1>

<section class="card">
  <h2>Crear usuario</h2>
  <form action="/web/usuarios" method="post" enctype="multipart/form-data" class="form-grid">
    <label>Nombre
      <input type="text" name="nombre_usuario" required minlength="2" maxlength="60">
    </label>
    <label>Correo
      <input type="email" name="correo" required minlength="5" maxlength="120">
    </label>
    <label>Rol
      <input type="text" name="rol" required minlength="3" maxlength="30">
    </label>
    <label>Foto (opcional)
      <input type="file" name="foto" accept="image/*">
    </label>
    <button type="submit">Crear usuario</button>
  </form>
</section>

<section class="card">
  <h2>Listado</h2>
  {% if usuarios %}
  <div class="table-responsive">
    <table>
      <thead>
        <tr>
          <th>ID</th><th>Nombre</th><th>Correo</th><th>Rol</th><th>Foto</th><th>Acciones</th>
        </tr>
      </thead>
      <tbody>
      {% for u in usuarios %}
        <tr>
          <td>{{ u.id_usuario }}</td>
          <td>{{ u.nombre_usuario }}</td>
          <td>{{ u.correo }}</td>
          <td>{{ u.rol }}</td>
          <td>
            {% if u.foto_url %}
              <img src="{{ u.foto_url }}" alt="foto {{ u.nombre_usuario }}" style="height:40px;">
            {% else %} — {% endif %}
          </td>
          <td>
            <form action="/web/usuarios/{{ u.id_usuario }}/delete" method="post" onsubmit="return confirm('¿Eliminar usuario?');">
              <button type="submit">Eliminar</button>
            </form>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
    <p>No hay usuarios.</p>
  {% endif %}
</section>

{% endblock %}
