<!-- app/templates/web/usuarios.html -->
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Usuarios</title>
  <link rel="stylesheet" href="/static/styles.css">
  <style>
    body{font-family:system-ui, Arial, sans-serif; margin:24px;}
    .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:16px; margin-top:16px;}
    .card{border:1px solid #e5e7eb; border-radius:10px; padding:14px;}
    .muted{color:#6b7280; font-size:12px;}
    img{max-width:100%; height:160px; object-fit:cover; background:#fafafa; border:1px dashed #e5e7eb; border-radius:8px}
    form.card{display:grid; gap:10px; max-width:520px}
    input,select,button{padding:10px; border:1px solid #e5e7eb; border-radius:8px}
    button{cursor:pointer; background:#111827; color:#fff}
    .toolbar{display:flex; gap:8px; align-items:center; margin-bottom:12px}
    .danger{background:#991b1b}
    a.button{display:inline-block; padding:10px 14px; background:#374151; color:#fff; border-radius:8px; text-decoration:none}
  </style>
</head>
<body>
  <h1>Usuarios</h1>

  <div class="toolbar">
    <a class="button" href="/">Inicio</a>
    <a class="button" href="/web/productos">Productos</a>
    <a class="button" href="/docs">Swagger</a>
  </div>

  <!-- Form nuevo usuario -->
  <form method="post" action="/web/usuarios" enctype="multipart/form-data" class="card">
    <h2>Nuevo usuario</h2>
    <input name="nombre_usuario" placeholder="Nombre" required>
    <input type="email" name="correo" placeholder="Correo" required>
    <select name="rol" required>
      <option value="admin">admin</option>
      <option value="vendedor">vendedor</option>
      <option value="cliente">cliente</option>
    </select>
    <input type="file" name="foto" accept="image/*">
    <button type="submit">Guardar</button>
  </form>

  <h2 style="margin-top:22px">Listado</h2>
  <div class="grid">
    {% for u in usuarios %}
      <div class="card">
        {% if u.foto_url %}
          <img src="{{ u.foto_url }}" alt="{{ u.nombre_usuario }}">
        {% endif %}
        <h3>{{ u.nombre_usuario }}</h3>
        <div class="muted">{{ u.correo }} · Rol: {{ u.rol }}</div>

        <form method="post" action="/web/usuarios/{{ u.id_usuario }}/delete" onsubmit="return confirm('¿Eliminar definitivamente?')">
          <button class="danger" type="submit">Eliminar</button>
        </form>
      </div>
    {% else %}
      <p class="muted">No hay usuarios.</p>
    {% endfor %}
  </div>
</body>
</html>
